<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Vehicle Tags - ContactKar</title>
    <link rel="stylesheet" href="styles_v2.css">
</head>
<!-- 3-TIER PRICING SECTION -->
<style>
  .pricing-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; max-width: 1000px; margin: 40px auto; padding: 20px; }
  .tier-card { border: 2px solid #e5e7eb; border-radius: 12px; padding: 24px; text-align: center; background: white; transition: 0.3s; }
  .tier-card:hover { border-color: #2563eb; transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
  .tier-card.popular { border-color: #2563eb; position: relative; }
  .popular-badge { background: #2563eb; color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: bold; position: absolute; top: -12px; left: 50%; transform: translateX(-50%); }
  .price { font-size: 36px; font-weight: bold; color: #111827; margin: 15px 0; }
  .price span { font-size: 16px; color: #6b7280; font-weight: normal; }
  .strike-price { text-decoration: line-through; color: #9ca3af; font-size: 18px; margin-right: 8px; }
  .feature-list { list-style: none; padding: 0; margin: 20px 0; text-align: left; }
  .feature-list li { margin-bottom: 10px; color: #374151; font-size: 15px; }
  .feature-list li::before { content: "âœ…"; margin-right: 8px; }
  .btn-buy { background: #2563eb; color: white; border: none; padding: 12px 24px; border-radius: 8px; width: 100%; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.2s; }
  .btn-buy:hover { background: #1d4ed8; }
</style>

<div class="pricing-grid">
  <!-- Basic Tier -->
  <div class="tier-card">
    <h3>Basic Tier</h3>
    <p style="color:#666; font-size:14px;">Essential privacy for 1 vehicle.</p>
    <div class="price"><span class="strike-price">â‚¹99</span> â‚¹0<span>/year</span></div>
    <p style="color:red; font-weight:bold; font-size:12px;">TESTING MODE</p>
    <ul class="feature-list">
      <li>1 Vehicle Tag</li>
      <li>Voice Call Alerts</li>
      <li>1 Emergency Contact</li>
      <li>Soft Copy Included</li>
    </ul>
    <button class="btn-buy" onclick="checkout('basic')">Get Basic Free</button>
  </div>

  <!-- Plus Tier -->
  <div class="tier-card popular">
    <div class="popular-badge">MOST POPULAR</div>
    <h3>Plus Tier</h3>
    <p style="color:#666; font-size:14px;">Best for couples or 2 vehicles.</p>
    <div class="price"><span class="strike-price">â‚¹249</span> â‚¹0<span>/year</span></div>
    <p style="color:red; font-weight:bold; font-size:12px;">TESTING MODE</p>
    <ul class="feature-list">
      <li>Up to 3 Tags</li>
      <li>WhatsApp & SMS Alerts</li>
      <li>2 Emergency Contacts</li>
      <li>Custom Scan Page Colors</li>
    </ul>
    <button class="btn-buy" onclick="checkout('plus')">Get Plus Free</button>
  </div>

  <!-- Pro Tier -->
  <div class="tier-card">
    <h3>Pro Tier</h3>
    <p style="color:#666; font-size:14px;">Maximum security for families.</p>
    <div class="price"><span class="strike-price">â‚¹499</span> â‚¹0<span>/year</span></div>
    <p style="color:red; font-weight:bold; font-size:12px;">TESTING MODE</p>
    <ul class="feature-list">
      <li>Up to 5 Tags</li>
      <li>Video Call Alerts</li>
      <li>3 Emergency Contacts</li>
      <li>Priority WhatsApp Support</li>
    </ul>
    <button class="btn-buy" onclick="checkout('pro')">Get Pro Free</button>
  </div>
</div>

<script>
  // Quick test script to assign the subscription
  async function checkout(tier) {
    const token = localStorage.getItem('token');
    if (!token) {
        alert("Please login first to buy a tag!");
        window.location.href = 'login.html';
        return;
    }

    try {
        // In testing, we just hit the upgrade API directly
        const res = await fetch('https://contactkar.onrender.com/api/billing/upgrade', {
            method: 'POST',
            headers: { 
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}` 
            },
            body: JSON.stringify({ tier: tier })
        });
        
        const data = await res.json();
        if(data.success) {
            alert(`Success! You are now subscribed to the ${tier.toUpperCase()} plan.`);
            window.location.href = 'dashboard.html'; // Send them back to dashboard to get their tags
        } else {
            alert("Error: " + data.error);
        }
    } catch (e) {
        alert("Server error. Make sure your Render backend is running!");
    }
  }
</script>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="nav-brand">Contact<span>Kar</span></a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="vehicle.html" class="nav-link active">Vehicle Tags</a></li>
                <li><a href="pet.html" class="nav-link">Pet Tags</a></li>
            </ul>
            <div>
                <a href="login.html" id="loginBtn" class="btn-nav btn-login">Login</a>
                <a href="dashboard.html" id="accountBtn" class="btn-nav btn-account">My Account</a>
            </div>
        </div>
    </nav>

    <header class="hero" style="background: #eff6ff;">
        <div class="container">
            <h1 style="color: var(--primary-dark);">Never Get Stuck in Parking Again</h1>
            <p>Smart QR Tags + Number Plate Calling for your Car or Bike.</p>
            <a href="login.html" class="btn btn-primary">Buy Now - â‚¹99</a>
        </div>
    </header>

    <section class="container" style="padding: 4rem 0;">
        <div style="display: flex; gap: 4rem; align-items: center;">
            <div style="flex: 1;">
                <h2>How It Works</h2>
                <ul style="list-style: none; margin-top: 1rem; font-size: 1.1rem;">
                    <li style="margin-bottom: 1rem;">âœ… <strong>Stick the QR:</strong> Place it on your windshield.</li>
                    <li style="margin-bottom: 1rem;">âœ… <strong>Scan or Type:</strong> People can scan the QR or type your plate number.</li>
                    <li style="margin-bottom: 1rem;">âœ… <strong>Get Notified:</strong> Receive a private call or WhatsApp alert instantly.</li>
                </ul>
            </div>
            <div style="flex: 1; background: white; padding: 2rem; border-radius: 12px; border: 1px solid var(--primary);">
                <div style="text-align: center;">
                    <span style="font-size: 5rem;">ðŸš—</span>
                    <h3>Vehicle Tag</h3>
                    <p style="font-size: 2.5rem; font-weight: bold; color: var(--primary); margin: 1rem 0;">â‚¹99</p>
                    <a href="login.html" class="btn btn-primary" style="width: 100%;">Order Now</a>
                </div>
            </div>
        </div>
    </section>

    <script src="nav_logic.js"></script>
</body>
</html>